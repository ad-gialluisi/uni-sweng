@startuml

!include skin.h

actor Cicerone
boundary vistaItinerario
control controlloreItinerario
control modelloItinerario

Cicerone -> vistaItinerario : elabora(dati)
activate vistaItinerario
vistaItinerario -> controlloreItinerario : richiediModificaItinerario(dati)
activate controlloreItinerario
controlloreItinerario -> controlloreItinerario : validaParametri(dati)
activate controlloreItinerario

alt I dati sono validi
    controlloreItinerario -> modelloItinerario : modificaItinerario(idItinerario, datiItinerario)
    activate modelloItinerario
    controlloreItinerario <<-- modelloItinerario : codiceStato
    deactivate modelloItinerario
else
    controlloreItinerario -> controlloreItinerario : set(codiceStato, OPERAZIONE_FALLITA)
end
deactivate controlloreItinerario

controlloreItinerario -> controlloreItinerario : setStatoOperazione(codiceStato)
controlloreItinerario -> controlloreItinerario : setMessaggio(codiceStato)

vistaItinerario -> controlloreItinerario : getStatoOperazione()
vistaItinerario <<-- controlloreItinerario : statoOperazione
deactivate controlloreItinerario

vistaItinerario -> vistaItinerario : salvaMessaggioPerSchermata(paginaItinerario)
vistaItinerario -> vistaItinerario : mandaA(paginaItinerario)

@enduml
